# 지하철 노선도 미션
[ATDD 강의](https://edu.nextstep.camp/c/R89PYi5H) 실습을 위한 지하철 노선도 애플리케이션

## 기능 구현 목록
* [ ] 노선(line) 생성 시 구간(section)을 생성한다.
* [ ] 노선(line)에 구간(section)을 등록할 수 있다.
  * [ ] 새로운 구간의 상행역은 해당 노선에 등록되어있는 하행 종점역이어야 한다.
    * [ ] 구간 등록 시 상행역이 등록할 노선의 하행 종점역이 아니면 구간을 등록할 수 없다. 
  * [ ] 새로운 구간의 하행역은 해당 노선에 등록되어있는 역일 수 없다.
    * [ ] 구간 등록 시 노선에 동일한 역이 존재하면 등록할 수 없다.
  * [ ] 새로운 구간 등록 시 위 조건에 부합하지 않는 경우 에러 처리한다.
* [ ] 노선(line)에 구간(section)을 삭제할 수 있다.
  * [ ] 지하철 노선에 등록된 역(하행 종점역)만 제거할 수 있다. 즉, 마지막 구간만 제거할 수 있다.
    * [ ] 구간 삭제 시 노선에 존재하지 않은 역은 삭제할 수 없다.
    * [ ] 구간 삭제 시 하행 종점역이 아니라면 삭제할 수 없다.
  * [ ] 지하철 노선에 상행 종점역과 하행 종점역만 있는 경우(구간이 1개인 경우) 역을 삭제할 수 없다.
  * [ ] 새로운 구간 제거시 위 조건에 부합하지 않는 경우 에러 처리한다.

## 인수 조건
구간 등록
```
Scenario: 노선 하행 종점역에 새로운 구간을 등록한다.
Given 노선을 생성하고
When 노선의 하행 종점역에 새로운 구간을 등록하면
Then 구간이 등록된다.
Then 노선의 구간 목록에서 조회할 수 있다.

Scenario: 노선의 하행 종점역이 아닌 역에 구간을 등록한다.
Given 노선을 생성하고
When 노선의 하행 종점역이 아닌 역에 새로운 구간을 등록하면
Then 구간을 등록할 수 없고 에러가 발생한다.

Scenario: 노선 하행 종점역에 새로운 구간을 등록한다.
Given 노선을 생성하고
When 노선의 하행 종점역에 노선에 존재하는 역을 포함한 구간을 등록하면
Then 구간을 등록할 수 없고 에러가 발생한다.
```

구간 삭제
```
Scenario: 노선의 하행 종점역 구간을 삭제한다.
Given 노선 1개를 생성하고
Given 구간 1개를 생성하고
When 노선의 하행 종점역 구간을 삭제하면
Then 구간이 삭제된다.
Then 노선의 구간 목록에서 조회되지 않는다.

Scenario: 노선에 존재하지 않는 구간을 삭제한다.
Given 노선 1개를 생성하고
Given 구간 1개를 생성하고
When 노선에 존재하지 않는 구간을 삭제하면
Then 구간 삭제를 실패하고 에러가 발생한다.

Scenario: 노선의 하행 종점역이 아닌 구간을 삭제한다.
Given 노선 1개를 생성하고
Given 구간 1개를 생성하고
When 노선의 하행 종점역이 아닌 구간을 삭제하면
Then 구간 삭제를 실패하고 에러가 발생한다.
Then 노선의 구간 목록에서 조회할 수 있다.

Scenario: 1개의 구간만 존재하는 노선의 구간을 삭제한다.
Given 노선 1개를 생성하고
When 노선의 구간을 삭제하면
Then 구간 삭제를 실패하고 에러가 발생한다.
```